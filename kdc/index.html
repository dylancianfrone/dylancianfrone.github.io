<!DOCTYPE html>
<html>
	<head>
		<script>

			var started = false;
			var bufferTime = 2;
			function setup(){
				songs = [
					/*SET 1*/
					Song("Fancy", "https://youtu.be/F_giaTjHvg8?t=48", 41),
					Song("Crown", "https://youtu.be/qjc23BuYQh8?t=55", 45),
					Song("Dance The Night Away", "https://youtu.be/LfeyBKIggmY?t=45", 36),
					Song("Yes Or Yes", "https://youtu.be/j5egSSBRRW0?t=63", 41),
					Song("TT", "https://youtu.be/biniRo2gSgE?t=45", 45),
					Song("Like Ohh-Ahh", "https://youtu.be/tkgYw_gS2k4?t=49", 37),
					Song("Mr Mr", "https://youtu.be/WTlbuy8o2YY?t=37", 45),
					Song("Very Nice", "https://youtu.be/oeClPI0Q0lI?t=31", 25),
					Song("Pop/Stars", "https://youtu.be/UOxkGD8qRB4?t=46", 38),
					Song("Red Flavor", "https://youtu.be/pq8bql4j8n8?t=38", 35),
					Song("Mr Chu", "https://youtu.be/69Qi-uesblY?t=47", 38),
					Song("Ring Ding Dong", "https://youtu.be/uIqhafyqToY?t=15", 20),
					/*SET 2*/
					Song("Growl", "https://youtu.be/2U3vP-kO3Jg?t=45", 33),
					Song("Lip And Hip", "https://youtu.be/pvSukffbS98?t=40", 62),
					Song("Hi High", "https://youtu.be/gSRFqpheg6Y?t=53", 32),
					Song("Umpah Umpah", "https://youtu.be/wkilycLzQbY?t=40", 40),
					Song("Wave", "https://youtu.be/DIpVecHOGkc?t=58", 34),
					Song("Thanks", "https://youtu.be/6Ie9llP16og?t=65", 25),
					Song("Catallena", "https://youtu.be/HxZvLRPF2j0?t=90", 35),
					Song("Shine", "https://youtu.be/SvCj8aFOAE4?t=38", 39),
					Song("TXT Run Away", "https://youtu.be/rqXOmyY5_y4?t=38", 48),
					Song("What Is Love", "https://youtu.be/xt2toA_AeTw?t=30", 39),
					Song("Peek A Boo", "https://youtu.be/KqnnRo6go2A?t=25", 45),
					Song("Gee", "https://youtu.be/Ul6irPb8h44?t=50", 32),
					/*SET 3*/
					Song("Get Cool", "https://youtu.be/BcXwZEbOvpo?t=40", 41),
					Song("MIROH", "https://youtu.be/IgaN3xyNnpw?t=61", 40),
					Song("Double Knot", "https://youtu.be/ACjsG5bOuAk?t=40", 44),
					Song("Side Effects", "https://youtu.be/qJXCbv9xscI?t=32", 32),
					Song("My Pace", "https://youtu.be/pok5yDw77uM?t=69", 36),
					Song("Sorry Sorry", "https://youtu.be/AAWqnA8PdcY?t=50", 40),
					Song("Russian Roulette", "https://youtu.be/ntqas3RIaF8?t=32", 43),
					Song("Ddu-du Ddu-du", "https://youtu.be/k3Oq6weth3E?t=63", 31),
					Song("Adios", "https://youtu.be/qfhWnJ9U1TI?t=38", 54),
					Song("Icy", "https://youtu.be/LjfD9qMXCP0?t=96", 50),
					Song("Mr Simple", "https://youtu.be/1NuAW21pr7o?t=60", 38),
					Song("Bubble Pop", "https://youtu.be/0TOaaiMct6Y?t=42", 45),
					/*SET 4*/
					Song("Signal", "https://youtu.be/VQtonf1fv_s?t=90", 42),
					Song("Snapping", "https://youtu.be/195tL4wrhsk?t=18", 65),
					Song("Into the New World", "https://youtu.be/eXpFtXD-rZ8?t=74", 46),
					Song("Zimzalabim", "https://youtu.be/TIJSsEVBbr4?t=105", 30),
					Song("Bon Bon Chocolat", "https://youtu.be/BWKbQX09rFU?t=33", 45),
					Song("Black Dress", "https://youtu.be/q3IEs2khur8?t=49", 24),
					Song("Shoot Out", "https://youtu.be/shhK3AWG5aw?t=67", 42),
					Song("Boom", "https://youtu.be/-GcXYImOZA4?t=56", 25), 
					Song("Obsession", "https://youtu.be/aCjGMPdwPj0?t=40", 25),
					Song("Psycho", "https://youtu.be/Z7yNvMzz2zg?t=49", 36), 
					Song("Baby Don't Stop", "https://youtu.be/xqfQ77ZCbW4?t=30", 22),
					Song("Gashina", "https://youtu.be/-PigwfGvE2s?t=42", 30), 
					/*SET 5*/
					Song("Move", "https://youtu.be/bs4Vk6iCoeU?t=36", 35),
				];
				return songs;
			}
			
			function DylanSetup(){
				songs= [
					Song("Crown", "https://youtu.be/qjc23BuYQh8?t=55", 45),
					Song("Double Knot", "https://youtu.be/ACjsG5bOuAk?t=40", 42),
					Song("TXT Run Away", "https://youtu.be/rqXOmyY5_y4?t=38", 48),
					Song("Growl", "https://youtu.be/2U3vP-kO3Jg?t=45", 33)
				];
			}
			
			function testSetup(){
					songs=[
						Song("Signal", "https://youtu.be/VQtonf1fv_s?t=90", 42),
						Song("Snapping", "https://youtu.be/195tL4wrhsk?t=18", 65),
						Song("Into the New World", "https://youtu.be/eXpFtXD-rZ8?t=74", 46),
						Song("Zimzalabim", "https://youtu.be/TIJSsEVBbr4?t=105", 30),
						Song("Bon Bon Chocolat", "https://youtu.be/BWKbQX09rFU?t=33", 45),
						Song("Black Dress", "https://youtu.be/q3IEs2khur8?t=49", 24),
						Song("Shoot Out", "https://youtu.be/shhK3AWG5aw?t=67", 42),
						Song("Boom", "https://youtu.be/-GcXYImOZA4?t=56", 25), 
						Song("Obsession", "https://youtu.be/aCjGMPdwPj0?t=40", 25),
						Song("Psycho", "https://youtu.be/Z7yNvMzz2zg?t=49", 36), 
						Song("Baby Don't Stop", "https://youtu.be/xqfQ77ZCbW4?t=30", 22),
						Song("Gashina", "https://youtu.be/-PigwfGvE2s?t=42", 30), 
						/*SET 5*/
						Song("Move", "https://youtu.be/bs4Vk6iCoeU?t=36", 35),
					];
					return songs;
			}

			function test(){
				if(!started){
					started=true;
					var secondsToWait = 1;
					songs = testSetup();
					songs = shuffleArray(songs);
					playSongs();
				}
			}
			
			function Song(namex, linkx, secsx){
				var newsong = {name: namex, link: linkx, secs: secsx};
				return newsong;
			}

			function playSong(song){
				setTimeout(function(){
						newWindow = window.open(song.link);
				}, 1000);
// 				setTimeout(function(){
// 						newWindow.close();
// 				}, (song.secs+bufferTime)*1000);
			}

			//Uses Durstenfeld shuffle algorithm
			function shuffleArray(songs){
				for(var i=songs.length-1; i>0; i--){
					var j = Math.floor(Math.random() * (i + 1));
			 		var temp = songs[i];
			 		songs[i] = songs[j];
			 		songs[j] = temp;
				}
				return songs;
			}
			var curTab = null;
			var songs;
			var index = 0;
			var paused = false;
			var secsLeft = 0;
			var interval;
			function playSongs(){
				if(secsLeft <= 0){
					playNextSong();
				} else {
					secsLeft--;	
				}
			}
			
			function playNextSong(){
				if(curTab != null) curTab.close();
				curTab = window.open(songs[index].link);
				secsLeft = songs[index].secs;
				index++;
			}
			
			function stop(){
				if(curTab != null){
					curTab.close();
					curTab = null;
					clearInterval(interval);
					started = false;
				}
			}
			
			function togglePause(){
				paused = !paused;	
			}
			
			function pause(){ paused = true; }
			function unpause() {
				if(paused){
					paused = false; 
					playNextSong();
				}
			}
			
			function main(){
					paused = false;
					if(!started){
					started = true;
					var secondsToWait = 1;
					songs = setup();
					songs = shuffleArray(songs);
					interval = setInterval(playSongs, 1000);
				}
			}
			
			function dylan(){
				if(!started){
					started=true;
					var secondsToWait = 1;
					songs = DylanSetup();
					songs = shuffleArray(songs);
					playSongs();
				}
			}
			
		</script>
		<link rel="stylesheet" type="text/css" href=style.css>
	</head>
	<p><button class="bluebutton" type="button" onclick="main()">Play All Songs</button></p>
	<p><button class="bluebutton" type="button" onclick="stop()">Stop</button></p>
	<p><button class="bluebutton" type="button" onclick="playNextSong()">Skip Current Song</button></p>
	
	<p>To pause a song, you have to pause the video on YouTube (to stop the video)
	<br/>and also press the pause button on here so that the tab doesn't close.
	<br/>Once you want to continue on with more songs, press the unpause button.
	<br/>The old tab should automatically close and the next song should start up.
	
	<p><button class="bluebutton" type="button" onclick="pause()">Pause</button></p>
	<p><button class="bluebutton" type="button" onclick="unpause()">Unpause</button></p>
	
	
	<br/>
	<p>MIXES</p>
	<p><button type="button" class="bluebutton" onclick="dylan()">Play Dylan's Mix</button></p>
	<p><button type="button" class="bluebutton" onclick="test()">Play Dylan's Mix</button></p>
</html>
